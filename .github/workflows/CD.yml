name: CD Workflow
on:
  workflow_dispatch:
  workflow_run:
    workflows: ["CI Workflow"]
    branches: [main]
    types: 
      - completed

jobs:
    development:
        environment: dev
        runs-on: self-hosted
        steps:
            #Checking out the repo 
            - run: | 
                docker image load --input /tmp/myimage.tar
                docker run --name=app -dp 3000:3000 duartedias471/ci_test:v1
                docker ps 
                curl `docker inspect --format='{{.NetworkSettings.IPAddress}}' app`:3000/api/latest-releases
                docker stop app

            
          